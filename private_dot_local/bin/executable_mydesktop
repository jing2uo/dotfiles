#!/bin/bash

connected_monitors=$(xrandr --query | grep -w connected | wc -l)

if [ $connected_monitors -gt 1 ]; then
	xrandr --output eDP-1 --off
	xrandr --output DP-1 --primary --mode 1920x1080 --right-of HDMI-1 --output HDMI-1 --mode 1024x768
	sleep 5
	picom -b
	killall -q polybar
	MONITOR=HDMI-1 polybar --quiet --reload extbar &
	MONITOR=DP-1 polybar --quiet --reload mainbar &
	nitrogen --set-zoom-fill --head=0 --random --force-setter=xinerama ~/Pictures/Wallpapers/ >/dev/null 2>&1
	nitrogen --set-zoom-fill --head=1 --random --force-setter=xinerama ~/Pictures/Wallpapers/ >/dev/null 2>&1
else
	picom -b
	MONITOR=eDP-1 polybar --quiet --reload mainbar &
	nitrogen --set-zoom-fill --random --force-setter=xinerama ~/Pictures/Wallpapers/
fi
